(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7800:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return b}});var r=t(5893),a=t(809),o=t.n(a),s=t(2447),c=t(9008),u=t(7294),i=t(3301),l=t.n(i),f=t(5323),p=t.n(f),d=t(8416),h=t.n(d),x=t(3928),m=function(n){var e=n.baseURL,t=n.fetch,r=(void 0===e?"":e).replace(/\/$/,""),a="/tasks",o="/token",s="/user",c="GET",u="POST",i="DELETE",l="PATCH";return{tasks:{_taskId:function(n){var e="".concat(a,"/").concat(n);return{patch:function(n){return t(r,e,l,n).send()},$patch:function(n){return t(r,e,l,n).send().then((function(n){return n.body}))},delete:function(n){return t(r,e,i,n).send()},$delete:function(n){return t(r,e,i,n).send().then((function(n){return n.body}))},$path:function(){return"".concat(r).concat(e)}}},get:function(n){return t(r,a,c,n).json()},$get:function(n){return t(r,a,c,n).json().then((function(n){return n.body}))},post:function(n){return t(r,a,u,n).json()},$post:function(n){return t(r,a,u,n).json().then((function(n){return n.body}))},$path:function(n){return"".concat(r).concat(a).concat(n&&n.query?"?".concat((0,x.dataToURLString)(n.query)):"")}},token:{post:function(n){return t(r,o,u,n).json()},$post:function(n){return t(r,o,u,n).json().then((function(n){return n.body}))},$path:function(){return"".concat(r).concat(o)}},user:{get:function(n){return t(r,s,c,n).json()},$get:function(n){return t(r,s,c,n).json().then((function(n){return n.body}))},post:function(n){return t(r,s,u,n,"FormData").json()},$post:function(n){return t(r,s,u,n,"FormData").json().then((function(n){return n.body}))},$path:function(){return"".concat(r).concat(s)}},get:function(n){return t(r,"",c,n).text()},$get:function(n){return t(r,"",c,n).text().then((function(n){return n.body}))},$path:function(){return"".concat(r)}}}(h()()),_=t(627),j=t.n(_),k=function(){var n=(0,u.useState)(!1),e=n[0],t=n[1],a=(0,u.useState)(""),c=a[0],i=a[1],l=(0,u.useState)({}),f=l[0],p=l[1],d=(0,u.useCallback)(function(){var n=(0,s.Z)(o().mark((function n(e){var t;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(t=e.target.files)&&void 0!==t&&t.length){n.next=2;break}return n.abrupt("return");case 2:return n.t0=p,n.next=5,m.user.$post({headers:{authorization:c},body:{icon:e.target.files[0]}});case 5:n.t1=n.sent,(0,n.t0)(n.t1);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[c]),h=(0,u.useCallback)((0,s.Z)(o().mark((function n(){var e,r,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=prompt("Enter the user id (See server/.env)"),r=prompt("Enter the user pass (See server/.env)"),e&&r){n.next=4;break}return n.abrupt("return",alert("Login failed"));case 4:return a="",n.prev=5,n.t0="Bearer ",n.next=9,m.token.$post({body:{id:e,pass:r}});case 9:n.t1=n.sent.token,a=n.t0.concat.call(n.t0,n.t1),i(a),n.next=17;break;case 14:return n.prev=14,n.t2=n.catch(5),n.abrupt("return",alert("Login failed"));case 17:return n.t3=p,n.next=20,m.user.$get({headers:{authorization:a}});case 20:n.t4=n.sent,(0,n.t3)(n.t4),t(!0);case 23:case"end":return n.stop()}}),n,null,[[5,14]])}))),[]),x=(0,u.useCallback)((function(){i(""),t(!1)}),[]);return(0,r.jsx)("div",{className:j().userBanner,children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{src:f.icon,className:j().userIcon}),(0,r.jsx)("span",{children:f.name}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:d}),(0,r.jsx)("button",{onClick:x,children:"LOGOUT"})]}):(0,r.jsx)("button",{onClick:h,children:"LOGIN"})})},b=function(){var n=l()(m.tasks),e=n.data,t=n.error,a=n.revalidate,i=(0,u.useState)(""),f=i[0],d=i[1],h=(0,u.useCallback)((function(n){return d(n.target.value)}),[]),x=(0,u.useCallback)(function(){var n=(0,s.Z)(o().mark((function n(e){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),f){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,m.tasks.post({body:{label:f}});case 5:d(""),a();case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[f]),_=(0,u.useCallback)(function(){var n=(0,s.Z)(o().mark((function n(e){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.tasks._taskId(e.id).patch({body:{done:!e.done}});case 2:a();case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[]),j=(0,u.useCallback)(function(){var n=(0,s.Z)(o().mark((function n(e){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.tasks._taskId(e.id).delete();case 2:a();case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[]);return t?(0,r.jsx)("div",{children:"failed to load"}):e?(0,r.jsxs)("div",{className:p().container,children:[(0,r.jsxs)(c.default,{children:[(0,r.jsx)("title",{children:"frourio-todo-app"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.png"})]}),(0,r.jsxs)("main",{className:p().main,children:[(0,r.jsx)(k,{}),(0,r.jsxs)("h1",{className:p().title,children:["Welcome to ",(0,r.jsx)("a",{href:"https://nextjs.org",children:"Next.js!"})]}),(0,r.jsx)("p",{className:p().description,children:"frourio-todo-app"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("form",{style:{textAlign:"center"},onSubmit:x,children:[(0,r.jsx)("input",{value:f,type:"text",onChange:h}),(0,r.jsx)("input",{type:"submit",value:"ADD"})]}),(0,r.jsx)("ul",{className:p().tasks,children:e.map((function(n){return(0,r.jsxs)("li",{children:[(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:n.done,onChange:function(){return _(n)}}),(0,r.jsx)("span",{children:n.label})]}),(0,r.jsx)("input",{type:"button",value:"DELETE",style:{float:"right"},onClick:function(){return j(n)}})]},n.id)}))})]})]}),(0,r.jsx)("footer",{className:p().footer,children:(0,r.jsxs)("a",{href:"https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app",target:"_blank",rel:"noopener noreferrer",children:["Powered by"," ",(0,r.jsx)("img",{src:"/vercel.svg",alt:"Vercel Logo",className:p().logo})]})})]}):(0,r.jsx)("div",{children:"loading..."})}},5301:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(7800)}])},5323:function(n){n.exports={container:"Home_container__1EcsU",main:"Home_main__1x8gC",footer:"Home_footer__1WdhD",title:"Home_title__3DjR7",description:"Home_description__17Z4F",logo:"Home_logo__1YbrH",tasks:"Home_tasks__1C02r"}},627:function(n){n.exports={userBanner:"UserBanner_userBanner__3uL6T",userIcon:"UserBanner_userIcon__kAU9w"}}},function(n){n.O(0,[414,774,888,179],(function(){return e=5301,n(n.s=e);var e}));var e=n.O();_N_E=e}]);